---
import "../styles/global.css";
const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="es" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <style>
      :root {
        --blue: #007bff;
        --blue-light: rgba(0, 123, 255, 0.3);
        --dark-blue: #61dafb;
        --dark-blue-light: rgba(97, 218, 251, 0.3);
        --gray-dark: #2e2e2e;
      }

      body {
        font-family: 'Inter', 'Segoe UI', sans-serif;
        background-color: #1a1a1a;
        color: #e5e5e5;
        line-height: 1.7;
        margin: 0;
        padding: 0;
      }

      .prose {
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 1.5rem;
      }

      h1 {
        font-size: 2.8em;
        font-weight: 800;
        margin-top: 1em;
        margin-bottom: 0.5em;
        border-bottom: 4px solid var(--blue);
        padding-bottom: 0.3em;
        color: var(--blue);
        text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
        animation: fadeInDown 0.5s ease-out;
      }

      h2 {
        font-size: 2em;
        font-weight: 700;
        margin-top: 2em;
        margin-bottom: 0.4em;
        border-bottom: 2px solid var(--blue-light);
        padding-bottom: 0.2em;
        color: var(--blue-light);
        animation: fadeInDown 0.4s ease-out;
      }

      h3 {
        font-size: 1.4em;
        font-weight: 600;
        color: var(--dark-blue);
        margin-top: 1.5em;
        margin-bottom: 0.5em;
      }

      p {
        font-size: 1.1em;
        margin-bottom: 1.2em;
      }

      pre {
        background-color: #2b2b2b;
        padding: 1em;
        border-radius: 8px;
        font-size: 0.95em;
        overflow-x: auto;
        position: relative;
      }

      code {
        font-family: 'Fira Code', monospace;
      }

      img {
        display: block;
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        margin: 1em auto;
        box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      }

      blockquote {
        border-left: 4px solid var(--blue);
        padding-left: 1em;
        background-color: #222;
        margin: 1.5em 0;
        font-style: italic;
      }

      .copy-button {
        position: absolute;
        top: 0.4rem;
        right: 0.4rem;
        background: transparent;
        border: none;
        cursor: pointer;
        opacity: 0.7;
        color: #ccc;
        z-index: 10;
      }

      .copy-button:hover {
        opacity: 1;
      }

      .copy-button svg {
        width: 1em;
        height: 1em;
        fill: currentColor;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>

  <body class="prose">
    <slot />

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const codeBlocks = document.querySelectorAll('pre');

        codeBlocks.forEach(block => {
          const codeElement = block.querySelector('code');
          if (!codeElement) return;

          const button = document.createElement('button');
          button.className = 'copy-button';
          button.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M16 1H4a2 2 0 0 0-2 2v14h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"/>
            </svg>
          `;

          button.addEventListener('click', () => {
            navigator.clipboard.writeText(codeElement.innerText).then(() => {
              const original = button.innerHTML;
              button.innerHTML = 'âœ… Copiado';
              setTimeout(() => button.innerHTML = original, 1500);
            });
          });

          block.appendChild(button);
        });
      });
    </script>
  </body>
</html>